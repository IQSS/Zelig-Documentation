\documentclass{article}

\usepackage{hyperref}

\title{Zelig Formula Specification}
\author{Matt Owen}

\newcommand{\tweedly}[0]{$\sim${ }}

\begin{document}

\maketitle

\section{Introduction}

The following is a technical specification for the types of model formula
objects that are, should be, and could be officially supported by Zelig Core.
The primary motivation for this document is have a specification for model
formulae that Zelig should officially support, and can in the future be easily
adapted to interact with the DVN.


%
%
%
\section{Requirements for Formulae}
\label{sec:req}

Zelig formulae need to be written generally enough to handle several types of
model formulae:

\begin{itemize}

  \item {\bf A single response term specified within a single model equation.}
    This is the case where users are studying a single response with a single
    set of predictor terms. This is the most basic model formula.

  \item {\bf A single response term specified across multiple model equations.}
    This is the case where users are studying a single response across multiple
    sets of predictor terms.

  \item {\bf Multiple response terms specified within a single model equation.}
    This is the case where users are studying the effects of a single set of
    predictor terms on multiple response terms.

  \item {\bf Multiple response terms specified within multiple model equations.}
    This is the extreme case where users are studying multiple predictor terms
    dependent on different sets of predictor terms. Additionally, this type of
    specification is the most general.

\end{itemize}

%
%
\pagebreak

%
%
%
\section{Existing Conventions in Zelig}
\label{sec:existing-zelig}

The requirements specified in section \ref{sec:req}, have implementations
in Zelig (versions 3.5 and 4.0).


\subsection{Table of Conventions}

% Table
{\noindent}\begin{tabular}{|l|l|l|}

  % Top Border
  \hline

  % Column Names (Row #1)
  & Single Response Term & Multiple Response Terms \\ \hline

  % Row #2
  Single Equation &
  {\tt y \tweedly a + b + c} & {\tt cbind(x, y) \tweedly a + b + c}
  \\ \hline

  % Row #3
  Multiple Equations & 
  {\tt list(x \tweedly a, y \tweedly b)} &
  {\tt list(x \tweedly a, y \tweedly b)} \\ \hline


\end{tabular}

\subsection{Technical Implementation}

The four types of formulae are created using three basic ingredients:

\begin{itemize}

  \item {\bf ``formula'' objects}, which are the building block of any model
    formula

  \item {\bf the ``cbind'' function}, which - by convention - is used in simple
    linear models to specify multiple response terms. This, in general, does not
    work for every statistical model.

  \item {\bf ``list'' objects}, which allow users to specify multiple
    model equations in an intuitive fashion. This method is primarily used for
    the bivariate, dichotomous regressions.

\end{itemize}



%
%
%
\section{Existing Conventions Outside of Zelig}
\label{sec:existing-elsewhere}

There are several existing conventions that specify model formula from packages
outside of Zelig.

\begin{itemize}

  \item Basic model formula, designated using the \tweedly operator, specifya single
    model equation with a single response variable. Example: 
    {\tt y \tweedly a + b}

  \item Model formula designated using the \verb+cbind+ function in conjunction
    with the \tweedly operator specify multiple response terms for a single
    equation or set of predictor terms. Example: 
    {\tt cbind(x, y) \tweedly a + b + c}

  \item The ``Formula'', object found at
    \url{http://cran.r-project.org/web/packages/Formula/}, encapsulates the
    features of a standard ``formula'' object while extending its functionality.
    In particular, ``Formula'' objects allow for the specification of multiple
    response terms and equations without using a ``list'' object or a call to
    ``cbind''. Examples:
    \begin{itemize}
      \item {\tt Formula(y \tweedly a + b)}
      \item {\tt Formula(x | y \tweedly a + b)}
      \item {\tt Formula(y \tweedly a | b)}
      \item {\tt Formula(x | y \tweedly a | b)}
   \end{itemize}

   More on the ``Formula'' object specification can be found here:\\
   \url{http://cran.r-project.org/web/packages/Formula/index.html}

\end{itemize}



%
%
%
\section{Technical Specification for Basic Formula}

The basic structure of a Zelig formula conforms to the following specifications:

\begin{enumerate}

  \item The left-hand side of the formula specifies the response terms.

  \item The right-hand side of the formula specifies the predictor terms.


  \item The left-hand side must adhere to one of the following two conventions:

    \begin{itemize}

      \item It must evaluate to a singular vector \emph{or}

      \item It must evaluate to a matrix with one column per outcome variable.
        \footnote{
          This allows strict support for the {\tt cbind} function within the
          left-hand-side of a ``formula'' object
        }

    \end{itemize}

  \item ``cbind'' can only be used as the first operation on the left-hand side
    of an equation. That is, the formula
    {\tt cbind(x, y) + cbind(a, b) \tweedly 1} is considered illegal.

  \item The left-hand side only supports the following operators and functions:
    +, *, :, | and cbind.

  \item The formula must only specify a single left-hand-side and a single
    right-hand-side. That is, nested formula are considered illegal. For
    example, the formula \begin{verbatim}y ~ a ~ b\end{verbatim} is considered 
    illegal.

  \item The formula may be a list of model formulae, if it is describing
    multiple outcome variables. In this situation, each formulae must follow
    all of the above restrictions. Additionally, each element of the list may
    only specify a single response term.

\end{enumerate}



\end{document}
